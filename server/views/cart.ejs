<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shopping Cart</title>
<style>
  /* General styles */
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f8f8f8;
  }

  h1 {
    text-align: center;
    margin-top: 20px;
  }

  /* Table styles */
  table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px auto;
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
  }

  th, td {
    padding: 10px;
    text-align: left;
    border-bottom: 1px solid #ddd;
  }

  th {
    background-color: #f2f2f2;
  }

  /* Total price styles */
  #totalPrice {
    text-align: center;
    margin-bottom: 20px;
  }

  /* Form container styles */
  .form-container {
    display: none;
    margin: 20px auto;
    max-width: 400px;
    padding: 20px;
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
  }

  .form-container.show {
    display: block;
  }

  h2 {
    margin-top: 0;
  }

  label {
    display: block;
    margin-bottom: 5px;
  }

  input {
    width: calc(100% - 10px);
    padding: 8px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 3px;
  }

  button {
    width: 100%;
    padding: 10px;
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
  }

  button:hover {
    background-color: #0056b3;
  }
</style>
</head>
<body>

<h1>Shopping Cart</h1>

<table>
  <thead>
    <tr>
      <th>S.No</th>
      <th>Product Name</th>
      <th>Price</th>
      <th>Quantity</th>
      <th>Total</th>
    </tr>
  </thead>
  <tbody id="cartItems">
    <!-- Cart items will be dynamically added here -->
  </tbody>
</table>

<div id="totalPrice">
  <!-- Total price will be displayed here -->
</div>

<button id="addAddressBtn">Add Address</button>

<div class="form-container" id="addressForm">
  <h2>Enter Address</h2>
  <form id="addressForm">
    <label for="name">Name:</label>
    <input type="text" id="name" name="name" />
    <label for="address">Address:</label>
    <input type="text" id="address" name="address" />
    <label for="pincode">Pincode:</label>
    <input type="text" id="pincode" name="pincode" />
    <button type="button" id="confirmOrderBtn">Confirm Order</button>
  </form>
</div>

<script>
  // Retrieve cart items from local storage
  const cartItems = JSON.parse(localStorage.getItem("cartItems"));

  // Reference to the table body
  const tableBody = document.getElementById("cartItems");

  // Variable to calculate total price
  let totalPrice = 0;

  // Check if cartItems exist
  if (cartItems && cartItems.length > 0) {
    // Loop through each cart item and add it to the table
    cartItems.forEach((item, index) => {
      const { name, price, quantity } = item;
      const total = price * quantity;
      totalPrice += total;

      // Create a new row for the cart item
      const row = `
            <tr>
                <td>${index + 1}</td>
                <td>${name}</td>
                <td>$${price.toFixed(2)}</td>
                <td>${quantity}</td>
                <td>$${total.toFixed(2)}</td>
            </tr>
        `;
      // Add the row to the table
      tableBody.innerHTML += row;
    });
  }

  // Display total price
  const totalElement = document.getElementById("totalPrice");
  totalElement.innerHTML = `<h3>Total Price: $${totalPrice.toFixed(2)}</h3>`;

  // Add Address button functionality
  const addAddressBtn = document.getElementById("addAddressBtn");
  const addressForm = document.getElementById("addressForm");

  addAddressBtn.addEventListener("click", () => {
    addressForm.classList.toggle("show");
  });

  // Confirm Order button functionality
  const confirmOrderBtn = document.getElementById("confirmOrderBtn");

  confirmOrderBtn.addEventListener("click", () => {
    const name = document.getElementById("name").value;
    const address = document.getElementById("address").value;
    const pincode = document.getElementById("pincode").value;

    // Store the form data in local storage
    const formData = { name, address, pincode };
    localStorage.setItem("formData", JSON.stringify(formData));

    // Redirect to the order confirmation page
    window.location.href = "/order-confirmation";
  });
</script>
</body>
</html>
